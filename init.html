<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <title>ログイン</title>
  <!--script src="script.js" defer></script-->
</head>
<body>
  <div class="login-container">
    <h2>ログイン</h2>
    <form id="loginForm">
      <label for="username">ユーザー名:</label>
      <input type="text" id="username" name="username" required>

      <label for="password">パスワード:</label>
      <input type="password" id="password" name="password" required>

      <p id="output"></p>
      <button type="button" onclick="LoginFunc()">ログイン</button>
    </form>
  </div>

  <script>
    async function LoginFunc() {
      const data = {
        username: document.getElementById('username').value,
        password: document.getElementById('password').value,
      };

      try {
        const response = await fetch("http://localhost:8000/login", {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });

        const result = await response.json();
        const value = result.message;
        console.log("Success:", value);
      } catch (error) {
        console.error("Error:", error);
      }
    }

    function login() {
    // fetch("https://fd84-125-103-213-138.ngrok-free.app/sensors", {
    //     method: "POST",
    //     headers: {
    //         "Content-Type": "application/json",
    //     },
    //     body: JSON.stringify({
    //         "id": 1,
    //         "acceleration_x": 200,
    //         "acceleration_y": 200,
    //         "acceleration_z": 200
    //     }),
    //     })
    // .then((response) => {
    //   if (!response.ok) {
    //     throw new Error("Network response was not ok");
    //   }
    //   return response.text();
    // })
    // .then((text) => {
    //   console.log(text);
    // })
    // .catch((error) => {
    //   console.error("There has been a problem with your fetch operation:", error);
    // });


      const res = fetch("http://localhost:8000/users");
    //   bodyを出力する
        // responseを全て読み込む
        res.then((response) => {
            return response.text();
        }).then((json) => {
            console.log(json);
        }).catch((error) => {
            console.log(error);
        });
        // res.then((response) => {
        //     return response.text();
        // }).then((json) => {
        //     console.log(text);
        // }).catch((error) => {
        //     console.log(error);
        // });
      // 乗客ダミーログイン成功の条件（実際はDBのデータが必要）
    //   if (username === 'user01' && password === 'password123') {
    //     // ログイン成功時の画面遷移
    //     window.location.href = 'welcome.html'; // 画面遷移先のファイル名を指定
    //   // ドライバーダミーログイン成功の条件（実際はDBのデータが必要）
    //   }else if (username === 'user02' && password === 'password123'){
    //     // ログイン成功時の画面遷移
    //     window.location.href = 'welcome2.html'; // 画面遷移先のファイル名を指定
    //   } else {
    //     alert('ユーザー名またはパスワードが正しくありません。');
    //   }
    }
  </script>
</body>
</html>